<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacker Calculator</title>
   <style>       :root {
            --bg-color: #0f0f0f;
            --text-color: white;
            --calc-bg: black;
            --display-bg: #2c2c2c;
            --btn-bg: #2c2c2c;
            --btn-color: #00ffcc;
            --operator-color: #ffaa00;
            --special-color: #8888ff;
            --clear-bg: #ff3b3b;
            --clear-hover: #ff6666;
            --clear-active: white;
            --equals-bg: #ffaa00;
            --equals-hover: #ffcc66;
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .light-mode {
            --bg-color: #f0f0f0;
            --text-color: black;
            --calc-bg: white;
            --display-bg: #f5f5f5;
            --btn-bg: #f5f5f5;
            --btn-color: #007acc;
            --operator-color: #ff6600;
            --special-color: #8888ff;
            --clear-bg: #ff3b3b;
            --clear-hover: #ff6666;
            --clear-active: white;
            --equals-bg: #ff6600;
            --equals-hover: #ff9933;
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        /* General Page Styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            gap: 20px;
            transition: all 0.3s ease;
            background: var(--bg-color);
            color: var(--text-color);
            padding: 20px 0;
        }

        /* Ad Container Styles */
        .ad-container {
            width: 100%;
            max-width: 728px;
            margin: 0 auto;
            text-align: center;
            padding: 10px 0;
        }

        .ad-container.top {
            display:block; width:100%; height:100%;
         position: fixed;
    top: 0;
    right: 0;
    width: 30%;
    height: 30%;
    z-index: 100;
    background: var(--bg-color);
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    
}

        .ad-container.bottom {
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 100;
            background: var(--bg-color);
            padding: 10px 0;
        }

        /* Calculator Wrapper */
        #calc {
            box-shadow: var(--shadow);
            border-radius: 15px;
            padding: 25px;
            width: 387px;
            transition: all 0.3s ease;
            background: var(--calc-bg);
            margin: 20px 0;
            z-index: 10;
        }

        /* Calculator Display */
        #res {
            width: calc(100% - 20px);
            height: 60px;
            border-radius: 12px;
            font-size: 2rem;
            padding: 10px;
            border: none;
            text-align: right;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            background: var(--display-bg);
            color: var(--text-color);
        }

        /* Button Container */
        .btn {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        /* Buttons General Style */
        .btn input[type="button"] {
            padding: 20px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 2px 4px 7px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
            aspect-ratio: 1/1;
            background: var(--btn-bg);
            color: var(--btn-color);
        }

        .btn input[type="button"]:hover {
            box-shadow: none;
            transform: translateY(-2px);
        }

        .btn input[type="button"]:active {
            transform: scale(0.95);
        }

        .btn input[type="button"]:focus {
            outline: 2px solid var(--btn-color);
        }

        /* Clear Button */
        #clear {
            background: var(--clear-bg);
            color: white;
        }

        #clear:hover {
            background: var(--clear-hover);
        }

        #clear:active {
            background: var(--clear-active);
            color: var(--clear-bg);
        }

        /* Backspace and All-Clear Buttons */
        #backspace,
        #all-clear {
            background: var(--operator-color);
            color: white;
        }

        #backspace:hover,
        #all-clear:hover {
            opacity: 0.8;
        }

        #backspace:active, 
        #all-clear:active {
            background: white;
            color: var(--operator-color);
        }

        /* Equal Button */
        input[type="button"][value="="] {
            background: var(--equals-bg);
            color: white;
            grid-column: span 1;
        }

        input[type="button"][value="="]:hover {
            background-color: var(--equals-hover);
        }

        input[type="button"][value="="]:active {
            background-color: white;
            color: var(--equals-bg);
        }

        /* Operator Buttons */
        input[type="button"][value="+"],
        input[type="button"][value="-"],
        input[type="button"][value="x"],
        input[type="button"][value="/"],
        input[type="button"][value="("],
        input[type="button"][value=")"] {
            color: var(--operator-color);
        }

        /* Special Buttons */
        input[type="button"][value="%"],
        input[type="button"][value="."],
        input[type="button"][value="000"],
        input[type="button"][value="00"],
        input[type="button"][value="10"] {
            color: var(--special-color);
        }

        /* Dark Mode Toggle Button */
        #theme-toggle {
            padding: 10px 20px;
            background: var(--btn-bg);
            color: var(--btn-color);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            margin-top: 20px;
        }

        #theme-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* History Display */
        #history {
            height: 30px;
            color: var(--text-color);
            text-align: right;
            margin-bottom: 5px;
            opacity: 0.7;
            font-size: 0.9rem;
        }

        /* Accessibility Improvements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
     @media (max-width: 450px) {
    .ad-container.top {
        position: sticky;
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;
        z-index: 100;
        background: var(--bg-color);
        padding: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .ad-container.top ins.adsbygoogle {
        display: block;
        width: 100%;
        height: 100%;
    }
}</style>
</head>
<body>
    <header>
        <h1 class="sr-only">Web Calculator</h1>
    </header>

    <main>
        <div id="calc" aria-label="Calculator">
            <div id="content">
                <form>
                    <div id="output">
                        <div id="history"></div>
                        <input type="text" id="res" aria-label="Calculator display" readonly>
                    </div>
                    <div class="btn">
                        <input type="button" value="C" onclick="Clear()" id="clear" aria-label="Clear">
                        <input type="button" value="AC" onclick="AllClear()" id="all-clear" aria-label="All Clear">
                        <input type="button" value="←" onclick="Back()" id="backspace" aria-label="Backspace">
                        <input type="button" value="(" onclick="Solve('(')" aria-label="Open parenthesis">
                        <input type="button" value=")" onclick="Solve(')')" aria-label="Close parenthesis">

                        <input type="button" value="7" onclick="Solve('7')" aria-label="Seven">
                        <input type="button" value="8" onclick="Solve('8')" aria-label="Eight">
                        <input type="button" value="9" onclick="Solve('9')" aria-label="Nine">
                        <input type="button" value="x" onclick="Solve('*')" aria-label="Multiply">
                        <input type="button" value="/" onclick="Solve('/')" aria-label="Divide">

                        <input type="button" value="4" onclick="Solve('4')" aria-label="Four">
                        <input type="button" value="5" onclick="Solve('5')" aria-label="Five">
                        <input type="button" value="6" onclick="Solve('6')" aria-label="Six">
                        <input type="button" value="-" onclick="Solve('-')" aria-label="Subtract">
                        <input type="button" value="%" onclick="percentage()" aria-label="Percentage">

                        <input type="button" value="1" onclick="Solve('1')" aria-label="One">
                        <input type="button" value="2" onclick="Solve('2')" aria-label="Two">
                        <input type="button" value="3" onclick="Solve('3')" aria-label="Three">
                        <input type="button" value="+" onclick="Solve('+')" aria-label="Add">
                        <input type="button" value="." onclick="Solve('.')" aria-label="Decimal point">

                        <input type="button" value="10" onclick="Solve('10')" aria-label="Ten">
                        <input type="button" value="000" onclick="Solve('000')" aria-label="Triple zero">
                        <input type="button" value="00" onclick="Solve('00')" aria-label="Double zero">
                        <input type="button" value="0" onclick="Solve('0')" aria-label="Zero">
                        <input type="button" value="=" onclick="Result()" id="equals" aria-label="Equals">
                    </div>
                </form>
            </div>
        </div>
    </main>

    <footer>
        <button id="theme-toggle" aria-label="Toggle dark mode">Light Mode</button>
    </footer>
    <script >  (adsbygoogle = window.adsbygoogle || []).push({});
        
        // Calculator functionality
        let output = document.getElementById('res');
        let history = document.getElementById('history');
        let lastCalculation = '';
        
        // Safe evaluation function
        function safeEval(expr) {
            try {
                // Remove any characters that aren't numbers, operators, or parentheses
                expr = expr.replace(/[^0-9+\-*/().%]/g, '');
                
                // Handle percentage calculations
                expr = expr.replace(/([0-9.]+)%/g, '($1/100)*');
                
                // Replace 'x' with '*' for proper evaluation
                expr = expr.replace(/x/g, '*');
                
                // Use Function constructor instead of eval
                return new Function('return ' + expr)();
            } catch (e) {
                return 'Error';
            }
        }
        
        // Handle keyboard input
        document.addEventListener('keydown', function(event) {
            const key = event.key;
            
            // Allow numbers and operators
            if (/[0-9+\-*/.%()]/.test(key)) {
                Solve(key);
                event.preventDefault();
            }
            // Handle Enter key as equals
            else if (key === 'Enter' || key === '=') {
                Result();
                event.preventDefault();
            }
            // Handle Backspace
            else if (key === 'Backspace') {
                Back();
                event.preventDefault();
            }
            // Handle Escape as clear
            else if (key === 'Escape') {
                Clear();
                event.preventDefault();
            }
        });
        
        function Solve(val) {
            // Prevent multiple decimal points in a number
            if (val === '.') {
                const currentValue = output.value;
                const parts = currentValue.split(/[\+\-\*\/]/);
                const lastPart = parts[parts.length - 1];
                
                if (lastPart.includes('.')) {
                    return; // Don't add another decimal point
                }
            }
            
            output.value += val;
            output.focus();
        }
        
        function Result() {
            if (output.value === '') return;
            
            lastCalculation = output.value;
            const result = safeEval(output.value);
            
            if (result === 'Error') {
                output.value = 'Error';
                setTimeout(Clear, 1000);
            } else {
                history.textContent = output.value + ' =';
                output.value = result;
            }
            output.focus();
        }
        
        function Clear() {
            output.value = '';
            output.focus();
        }
        
        function AllClear() {
            output.value = '';
            history.textContent = '';
            output.focus();
        }
        
        function Back() {
            output.value = output.value.slice(0, -1);
            output.focus();
        }
        
        function percentage() {
            const currentValue = output.value;
            const parts = currentValue.split(/[\+\-\*\/]/);
            const lastNumber = parts[parts.length - 1];
            
            if (lastNumber) {
                const percentageValue = parseFloat(lastNumber) / 100;
                output.value = currentValue.slice(0, -lastNumber.length) + percentageValue;
            }
            output.focus();
        }
        
        // Dark Mode Toggle
        const darkModeToggle = document.getElementById('theme-toggle');
        let isDarkMode = true; // Default is dark mode
        
        // Check for saved preference
        if (localStorage.getItem('darkMode') === 'false') {
            isDarkMode = false;
            updateTheme();
        }
        
        darkModeToggle.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            localStorage.setItem('darkMode', isDarkMode);
            updateTheme();
        });
        
        function updateTheme() {
            if (isDarkMode) {
                document.body.classList.remove('light-mode');
                darkModeToggle.textContent = 'Light Mode';
                darkModeToggle.setAttribute('aria-label', 'Switch to light mode');
            } else {
                document.body.classList.add('light-mode');
                darkModeToggle.textContent = 'Dark Mode';
                darkModeToggle.setAttribute('aria-label', 'Switch to dark mode');
            }
        }
        
        // Initialize
        updateTheme();
        output.focus();</script>
</body>
</html>
